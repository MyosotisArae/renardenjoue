{% extends 'main.html.twig' %}

{% block title %}Log in!{% endblock %}

{% block laPage %}
<div class="col-12">
  <br>
</div>
<div class="col-1">
  <br>
</div>
{# Si c'est l'administrateur qui est connecté, l'affichage sera différent. #}
{% set isAdmin = false %}
{% set role = 0 %}
{% set largeurFenetre = 7 %}
{% set pourcentBoutons = 30 %}
{% set isUser = false %}
{% if 'memberConnected' in session|keys %}
{%   set isUser = true %}
{%   set role = session.memberConnected.roles %}
{%   if role >= 8 %}
{%     set isAdmin = true %}
{%     set largeurFenetre = 10 %}
{%     set pourcentBoutons = 14 %}
{%   endif %}
{% endif %}
<div class="col-md-{{largeurFenetre}} col-11 enBleu">

  {% if isUser %}
    <table class='w-100'> 

      <tr>
        <td style='width : 70%;'>
          <h1 class="h3 mb-3 font-weight-normal">Compte de {{ session.memberConnected.nom }} :</h1>
        </td>
        <td style='width : {{pourcentBoutons}}%;'>
          <form method='post' action='logout'>
            <button class='btn-primary btn float-right' type='submit'>Déconnexion</button>
          </form>
        </td>
        {% if isAdmin %}
        <td style='width : 16%;'>
          <form method='post' action='gestion'>
            <button class='btn-primary btn float-right' type='submit'>Administrateur</button>
          </form>
        </td>
        {% endif %}
      </tr>
    </table>    
    {{ form(formulaire) }}
  {% else %}
    <meta http-equiv= "refresh" content="0; login" />
  {% endif %}

</div>

{% endblock %}
